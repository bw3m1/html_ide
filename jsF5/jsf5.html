<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JS Runner</title>
  <style id="theme-style">
    body {
      margin: 0;
      padding: 1rem;
      font-family: monospace;
      background: #111;
      color: #fff;
    }
    .light {
      background: #fff;
      color: #000;
    }
    pre {
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <h2>JS Runner Output</h2>
  <pre id="output">Waiting for script...</pre>

  <script>
    // Listen to messages from the editor tab
    window.addEventListener("message", (event) => {
      const { type, jsCode, theme } = event.data || {};
      if (type === "jsf5-update") {
        // Sync theme
        document.body.className = theme === 'light' ? 'light' : '';

        // Clear previous output
        const output = document.getElementById('output');
        output.textContent = '';

        try {
          // Redirect console.log to output
          const originalLog = console.log;
          console.log = (...args) => {
            output.textContent += args.join(' ') + '\n';
            originalLog(...args);
          };

          // Run the code
          new Function(jsCode)();

          console.log = originalLog;
        } catch (err) {
          output.textContent = 'Error: ' + err.message;
        }
      }
    }, false);
  </script>
</body>
</html>
